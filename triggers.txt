CREATE PROCEDURE TEST()
SELECT * FROM STUDENT;

CREATE PROCEDURE TEST1()
SELECT * FROM TEACHER;

DROP PROCEDURE  new_procedure;


CREATE TRIGGER TRIG BEFORE INSERT ON STUDENT FOR EACH ROW 
BEGIN
IF(SELECT EXISTS(SELECT ROLLNO FROM STUDENT WHERE ROLLNO=NEW.ROLLNO))
THEN 
SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT='ROLLNO ALREADY EXIST';
END IF;
END

CREATE TRIGGER TRIG1 BEFORE INSERT ON teacher FOR EACH ROW 
BEGIN
IF(SELECT EXISTS(SELECT emp_id FROM teacher WHERE emp_id=NEW.emp_id))
THEN 
SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT='Employee Already Exist';
END IF;
END

CREATE TRIGGER TRIG2 BEFORE INSERT ON student FOR EACH ROW 
BEGIN
IF NEW.email NOT LIKE'_%@_%.__%'
THEN 
SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT='Email Field is not valid';
END IF;
END

CREATE TRIGGER TRIG3 BEFORE INSERT ON teacher FOR EACH ROW 
BEGIN
IF NEW.email NOT LIKE'_%@_%.__%'
THEN 
SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT='Email Field is not valid';
END IF;
END

CREATE TRIGGER TRIG4 BEFORE INSERT ON student FOR EACH ROW 
BEGIN
IF NEW.dob NOT LIKE'__%/__%/____%'
THEN 
SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT='enter valid dob';
END IF;
END

CREATE TRIGGER TRIG5 BEFORE INSERT ON teacher FOR EACH ROW 
BEGIN
IF NEW.dob NOT LIKE'__%/__%/____%'
THEN 
SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT='enter valid dob';
END IF;
END


CREATE TRIGGER TRIG6 BEFORE INSERT ON student FOR EACH ROW 
BEGIN
IF NEW.phone NOT LIKE'+91__________'
THEN 
SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT='enter valid phone no';
END IF;
END

CREATE TRIGGER TRIG7 BEFORE INSERT ON teacher FOR EACH ROW 
BEGIN
IF NEW.phone NOT LIKE'+91__________'
THEN 
SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT='enter valid phone no';
END IF;
END

CREATE TRIGGER TRIG8 BEFORE INSERT ON student FOR EACH ROW 
BEGIN
IF NEW.class_x NOT LIKE'%_%%'
THEN 
SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT='enter valid Xth percentage';
END IF;
END

create table marks(
rollno varchar(15) NOT NULL,
marks1 varchar(20) DEFAULT NULL,
 marks2 varchar(20) DEFAULT NULL,
marks3 varchar(20) DEFAULT NULL,
marks4 varchar(20) DEFAULT NULL,
marks5 varchar(20) DEFAULT NULL,
primary key(rollno) ,
foreign key(rollno) references student(rollno)
);

create table login(
username varchar(20) NOT NULL,
password varchar(20) NOT NULL,
primary key(username));
